<?xml version="1.0" encoding="UTF-8" ?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>Approval_Needed_Send_Email</name>
        <label>Approval Needed - Send Email</label>
        <locationX>402</locationX>
        <locationY>539</locationY>
        <actionName
    >Ticket__c.Ticket_Webinar_Reg_Order_Invite_Approval_Needed</actionName>
        <actionType>emailAlert</actionType>
        <connector>
            <targetReference>Was_Ticket_Assigned</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment
    >Ticket__c.Ticket_Webinar_Reg_Order_Invite_Approval_Needed</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>Approved_Send_Email</name>
        <label>Approved - Send Email</label>
        <locationX>666</locationX>
        <locationY>539</locationY>
        <actionName
    >Ticket__c.Ticket_Webinar_Reg_Order_Invite_Approved_Ticket_Closed</actionName>
        <actionType>emailAlert</actionType>
        <connector>
            <targetReference>Was_Ticket_Assigned</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment
    >Ticket__c.Ticket_Webinar_Reg_Order_Invite_Approved_Ticket_Closed</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>Send_Ticket_Webinar_Assigned_Alert</name>
        <label>Send Ticket - Webinar - Assigned Alert</label>
        <locationX>358</locationX>
        <locationY>1331</locationY>
        <actionName>emailSimple</actionName>
        <actionType>emailSimple</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>emailAddresses</name>
        </inputParameters>
        <inputParameters>
            <name>emailAddressesArray</name>
            <value>
                <elementReference>var_Email_Collection</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>ccRecipientAddressList</name>
        </inputParameters>
        <inputParameters>
            <name>composeEmailContent</name>
            <value>
                <stringValue>True</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailSubject</name>
            <value>
                <elementReference
        >tt_Assigned_Email_Subject_Line</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailBody</name>
            <value>
                <elementReference>var_Assigned_Email_Body</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>sendRichBody</name>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputParameters>
        <nameSegment>emailSimple</nameSegment>
        <offset>0</offset>
        <versionString>1.0.1</versionString>
    </actionCalls>
    <actionCalls>
        <name>Ticket_Webinar_Created</name>
        <label>Ticket - Webinar - Created</label>
        <locationX>50</locationX>
        <locationY>431</locationY>
        <actionName>Ticket__c.Ticket_Webinar_Created</actionName>
        <actionType>emailAlert</actionType>
        <connector>
            <targetReference>Was_Ticket_Assigned_On_Creation</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>Ticket__c.Ticket_Webinar_Created</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <apiVersion>57.0</apiVersion>
    <areMetricsLoggedToDataCloud>false</areMetricsLoggedToDataCloud>
    <assignments>
        <name>Assign_Email_Body</name>
        <label>Assign Email Body</label>
        <locationX>358</locationX>
        <locationY>1223</locationY>
        <assignmentItems>
            <assignToReference>var_Assigned_Email_Body</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>tt_Assigned_Email_Body</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_Assignee_Email</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Assignee__r.Email</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_Email_Collection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>var_Assignee_Email</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_Email_Collection</assignToReference>
            <operator>Add</operator>
            <value>
                <stringValue>ayanez@erepublic.com</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_Email_Collection</assignToReference>
            <operator>Add</operator>
            <value>
                <stringValue>rjohnson@erepublic.com</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference
      >Send_Ticket_Webinar_Assigned_Alert</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Created_or_Updated</name>
        <label>Created or Updated?</label>
        <locationX>358</locationX>
        <locationY>323</locationY>
        <defaultConnector>
            <targetReference>Phase_Changed</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Ticket Updated</defaultConnectorLabel>
        <rules>
            <name>Ticket_Created</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>f_Is_New</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Ticket_Webinar_Created</targetReference>
            </connector>
            <label>Ticket Created</label>
        </rules>
    </decisions>
    <decisions>
        <name>Phase_Changed</name>
        <label>Phase Changed</label>
        <locationX>666</locationX>
        <locationY>431</locationY>
        <defaultConnector>
            <targetReference>Was_Ticket_Assigned</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Invite_Sent_for_Approval</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Phase__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Phase__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Invite Sent for Approval</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Approval_Needed_Send_Email</targetReference>
            </connector>
            <label>Invite Sent for Approval</label>
        </rules>
        <rules>
            <name>Invite_Approved</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Phase__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Phase__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Invite Approved - Ticket Closed</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Approved_Send_Email</targetReference>
            </connector>
            <label>Invite Approved</label>
        </rules>
    </decisions>
    <decisions>
        <name>Was_Ticket_Assigned</name>
        <label>Was Ticket Assigned?</label>
        <locationX>666</locationX>
        <locationY>731</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Yes_Ticket_Assigned</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Assignee__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Assignee__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Event_Record</targetReference>
            </connector>
            <label>Yes, Ticket Assigned</label>
        </rules>
    </decisions>
    <decisions>
        <name>Was_Ticket_Assigned_On_Creation</name>
        <label>Was Ticket Assigned</label>
        <locationX>50</locationX>
        <locationY>539</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Yes_Ticket_Assigned_On_Creation</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Assignee__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Event_Record</targetReference>
            </connector>
            <label>Yes, Ticket Assigned</label>
        </rules>
    </decisions>
    <environments>Default</environments>
    <formulas>
        <name>f_15_Char_Event_Id</name>
        <dataType>String</dataType>
        <expression>LEFT({!Get_Event_Record.Id},15)</expression>
    </formulas>
    <formulas>
        <name>f_Is_New</name>
        <dataType>Boolean</dataType>
        <expression>ISNEW()</expression>
    </formulas>
    <formulas>
        <name>f_Sponsor_Link</name>
        <dataType>String</dataType>
        <expression
    >&quot;https://erepublic.lightning.force.com/lightning/r/Account/&quot; &amp; {!Get_Event_Record.Sponsor__c} &amp; &quot;/view&quot;</expression>
    </formulas>
    <interviewLabel
  >Ticket - RT AS - Webinar Reg Order - Phase Changed {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Ticket - RT AS - Webinar Reg Order - Phase Changed/Assigned</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordLookups>
        <name>Get_Event_Record</name>
        <label>Get Event Record</label>
        <locationX>358</locationX>
        <locationY>1115</locationY>
        <assignNullValuesIfNoRecordsFound
    >false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Assign_Email_Body</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Event__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Events__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <start>
        <locationX>232</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Created_or_Updated</targetReference>
        </connector>
        <filterLogic>1 AND (2 OR 3 OR 4)</filterLogic>
        <filters>
            <field>RecordTypeId</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>0121O000001lst2QAA</stringValue>
            </value>
        </filters>
        <filters>
            <field>Phase__c</field>
            <operator>IsChanged</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Assignee__c</field>
            <operator>IsChanged</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>CreatedDate</field>
            <operator>IsChanged</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <object>Ticket__c</object>
        <recordTriggerType>CreateAndUpdate</recordTriggerType>
        <triggerType>RecordAfterSave</triggerType>
    </start>
    <status>Active</status>
    <textTemplates>
        <name>tt_Assigned_Email_Body</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text
    >&lt;div style=&quot;line-height:110%;font-family:Arial;font-size:12pt;&quot;&gt;Dear {!$Record.Assignee__r.FirstName},&lt;br&gt;&lt;br&gt;I have just assigned you to a webinar:&lt;br&gt;&lt;br&gt;&lt;b&gt;{!$Record.Title__c}&lt;/b&gt;&lt;br&gt;&lt;br&gt;Please submit a proof for QC by &lt;b&gt;{!$Record.Due_Date_Requested__c}&lt;/b&gt;.&lt;br&gt;&lt;br&gt;&lt;table border=&quot;0&quot; cellspacing=&quot;0&quot; cellpadding=&quot;0&quot;&gt;&lt;tr&gt;&lt;td bgcolor=&quot;#EB7035&quot; style=&quot;padding: 12px 18px 12px 18px; border-radius:3px&quot; align=&quot;center&quot;&gt;&lt;a href=&quot;https://erepublic.my.salesforce.com/{!$Record.Id}&quot; target=&quot;_blank&quot; style=&quot;font-size: 16px; font-family: Helvetica, Arial, sans-serif; font-weight: normal; color: #ffffff; text-decoration: none; display: inline-block;&quot;&gt;View Ticket &amp;rarr;&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;br&gt;&lt;table border=1 cellspacing=0 cellpadding=3 width=513&gt;&lt;tr style=&quot;line-height:110%;font-family:Arial;font-size:12pt;&quot;&gt;&lt;td width=152 style=&quot;line-height:110%;font-family:Arial;font-size:12pt;&quot;&gt;&lt;div&gt;&lt;b&gt;&lt;span style=&quot;line-height:110%;font-family:Arial;font-size:12pt;&quot;&gt;Brand&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;/td&gt;  &lt;td width=361 nowrap valign=bottom style=&quot;line-height:110%;font-family:Arial;font-size:12pt;&quot;&gt;&lt;div&gt;&lt;span style=&quot;line-height:110%;font-family:Arial;font-size:12pt;&quot;&gt;{!Get_Event_Record.Brand__c}&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr style=&quot;line-height:110%;font-family:Arial;font-size:12pt;&quot;&gt;&lt;td width=152&gt;&lt;div&gt;&lt;b&gt;&lt;span style=&quot;line-height:110%;font-family:Arial;font-size:12pt;&quot;&gt;Sponsor&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;line-height:110%;font-family:Arial;font-size:12pt;&quot; width=361&gt;&lt;div&gt;&lt;span style=&quot;line-height:110%;font-family:Arial;font-size:12pt;&quot;&gt;&lt;a href=&quot;{!f_Sponsor_Link}&quot;&gt;{!Get_Event_Record.Sponsor__r.Name}&lt;/a&gt;&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr style=&quot;line-height:110%;font-family:Arial;font-size:12pt;&quot;&gt;&lt;td width=152 style=&quot;line-height:110%;font-family:Arial;font-size:12pt;&quot;&gt;&lt;div&gt;&lt;b&gt;&lt;span style=&quot;line-height:110%;font-family:Arial;font-size:12pt;&quot;&gt;Delivery Contract&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;line-height:110%;font-family:Arial;font-size:12pt;&quot; width=361&gt;&lt;div style=&quot;line-height:110%;font-family:Arial;font-size:12pt;&quot;&gt;
&lt;a href=&quot;https://erepublic.lightning.force.com/lightning/r/Contract/{!Get_Event_Record.Delivery_Contract__c}/view&quot;&gt;{!Get_Event_Record.Delivery_Contract__r.ContractNumber}&lt;/a&gt;&lt;/div&gt;
  &lt;/td&gt;
 &lt;/tr&gt;&lt;tr style=&quot;line-height:110%;font-family:Arial;font-size:12pt;&quot;&gt;&lt;td width=152&gt;&lt;div style=&quot;line-height:110%;font-family:Arial;font-size:12pt;&quot;&gt;&lt;b&gt;Event Id&lt;/b&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;line-height:110%;font-family:Arial;font-size:12pt;&quot;&gt;&lt;div style=&quot;line-height:110%;font-family:Arial;font-size:12pt;&quot;&gt;&lt;span style=&quot;line-height:110%;font-family:Arial;font-size:12pt;&quot;&gt;{!f_15_Char_Event_Id}&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr style=&quot;line-height:110%;font-family:Arial;font-size:12pt;&quot;&gt;&lt;td width=152&gt;&lt;div style=&quot;line-height:110%;font-family:Arial;font-size:12pt;&quot;&gt;&lt;b&gt;Webinar Landing Page URL&lt;/b&gt;&lt;/div&gt;&lt;/td&gt;&lt;td width=361&gt;&lt;div style=&quot;line-height:110%;font-family:Arial;font-size:12pt;&quot;&gt;&lt;a href=&quot;{!$Record.Landing_Page_URL__c}&quot;&gt;{!$Record.Landing_Page_URL__c}&lt;/a&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr style=&quot;line-height:110%;font-family:Arial;font-size:12pt;&quot;&gt;&lt;td width=152&gt;&lt;div style=&quot;line-height:110%;font-family:Arial;font-size:12pt;&quot;&gt;&lt;b&gt;Client Custom Opt-Out Text&lt;/b&gt;&lt;/div&gt;&lt;/td&gt;&lt;td&gt;&lt;div&gt;&lt;span style=&quot;line-height:110%;font-family:Arial;font-size:12pt;&quot;&gt;{!$Record.Client_Custom_Opt_Out_Text__c}&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;line-height:110%;font-family:Arial;font-size:12pt;&quot;&gt;&lt;div&gt;&lt;b&gt;&lt;span style=&quot;line-height:110%;font-family:Arial;font-size:12pt;&quot;&gt;Event Filters&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;/td&gt;&lt;td width=361&gt;&lt;div &gt;&lt;span style=&quot;line-height:110%;font-family:Arial;font-size:12pt;&quot;&gt;{!$Record.Event_Filters__c}&lt;/span&gt;&lt;/div&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; &lt;div&gt;&lt;span style=&quot;line-height:110%;font-family:Arial;font-size:12pt;&quot;&gt;&lt;br&gt;&lt;br&gt;Thank You,&lt;br&gt;&lt;br&gt;{!$User.FirstName} {!$User.LastName}&lt;br&gt;{!$User.Title} | {!$User.CompanyName}&lt;br&gt;{!$User.Phone} | &lt;a href=&quot;mailto:{!$User.Email}&quot;&gt;{!$User.Email}&lt;/a&gt;&lt;/span&gt;&lt;/div&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;div style=&quot;font-family:Segoe UI&quot;&gt;&lt;font size=&quot;1&quot;&gt;&lt;a href=&quot;https://erepublic.my.salesforce.com/{!$Record.Id}&quot;&gt;{!$Record.Name}&lt;/a&gt; | &lt;a href=&quot;https://erepublic.lightning.force.com/lightning/setup/Flows/page?address=%2F3005Y000001Aff2QAC%3FretUrl%3D%2Flightning%2Fsetup%2FFlows%2Fhome&quot;&gt;Flow&lt;/a&gt; | Alert generated by: {!$User.FirstName} {!$User.LastName}&lt;/font&gt;&lt;/div&gt;</text>
    </textTemplates>
    <textTemplates>
        <name>tt_Assigned_Email_Subject_Line</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>{!$Record.Phase__c}: {!$Record.Name} - {!$Record.Title__c}</text>
    </textTemplates>
    <variables>
        <name>var_Assigned_Email_Body</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_Assignee_Email</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_Email_Collection</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
