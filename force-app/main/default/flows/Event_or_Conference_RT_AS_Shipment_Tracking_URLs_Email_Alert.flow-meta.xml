<?xml version="1.0" encoding="UTF-8" ?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>Reminder_to_Check_Tracking_Numbers</name>
        <label>Reminder to Check Tracking Numbers</label>
        <locationX>1018</locationX>
        <locationY>276</locationY>
        <actionName>emailSimple</actionName>
        <actionType>emailSimple</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>emailAddresses</name>
            <value>
                <stringValue
        >salesforce@erepublic.com,swidm@erepublic.com</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>senderType</name>
            <value>
                <stringValue>OrgWideEmailAddress</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>senderAddress</name>
            <value>
                <stringValue>salesforce@erepublic.com</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailSubject</name>
            <value>
                <stringValue
        >Check Tracking Numbers for {!$Record.Name}</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailBody</name>
            <value>
                <elementReference
        >text_Template_Reminder_Check_Tracking_Numbers</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>sendRichBody</name>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputParameters>
        <nameSegment>emailSimple</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>Send_Email_with_Standard_Tracking_URLs</name>
        <label>Send Email with Standard Tracking URLs</label>
        <locationX>182</locationX>
        <locationY>4572</locationY>
        <actionName>emailSimple</actionName>
        <actionType>emailSimple</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>emailAddressesArray</name>
            <value>
                <elementReference
        >var_Email_Recipient_Collection</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>ccRecipientAddressList</name>
            <value>
                <stringValue>salesforce@erepublic.com</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>senderType</name>
            <value>
                <stringValue>OrgWideEmailAddress</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>senderAddress</name>
            <value>
                <stringValue>salesforce@erepublic.com</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailSubject</name>
            <value>
                <stringValue>Shipment Tracking for {!$Record.Name}</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailBody</name>
            <value>
                <elementReference
        >text_Template_Email_Body_Standard</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>sendRichBody</name>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputParameters>
        <nameSegment>emailSimple</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <apiVersion>57.0</apiVersion>
    <areMetricsLoggedToDataCloud>false</areMetricsLoggedToDataCloud>
    <assignments>
        <name>Add_1_to_Count_Up_UPS</name>
        <label>Add 1 to Count Up</label>
        <locationX>138</locationX>
        <locationY>1656</locationY>
        <assignmentItems>
            <assignToReference>var_Count_Up</assignToReference>
            <operator>Add</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_Through_UPS_Shipments</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_1st_FedEx_Tracking_Number_to_URL_First</name>
        <label>Add 1st FedEx Tracking Number to URL (First)</label>
        <locationX>138</locationX>
        <locationY>2580</locationY>
        <assignmentItems>
            <assignToReference>var_Tracking_url_FedEx</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference
        >Loop_Through_FedEx_Shipments.Tracking_Number__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_Count_Up</assignToReference>
            <operator>Add</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_Through_FedEx_Shipments</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_Tracking_Number_to_URL</name>
        <label>Add Tracking Number to URL</label>
        <locationX>138</locationX>
        <locationY>1548</locationY>
        <assignmentItems>
            <assignToReference>var_Tracking_url_UPS</assignToReference>
            <operator>Add</operator>
            <value>
                <stringValue
        >&amp;InquiryNumber{!var_Count_Up}={!Loop_Through_UPS_Shipments.Tracking_Number__c}</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_1_to_Count_Up_UPS</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_USPS_Tracking_Number_to_URL</name>
        <label>Add USPS Tracking Number to URL</label>
        <locationX>402</locationX>
        <locationY>3588</locationY>
        <assignmentItems>
            <assignToReference>var_Tracking_url_USPS</assignToReference>
            <operator>Add</operator>
            <value>
                <stringValue
        >&amp;qtc_tLabels{!var_Count_Up}={!Loop_Through_USPS_Shipments.Tracking_Number__c}</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_Count_Up</assignToReference>
            <operator>Add</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_Through_USPS_Shipments</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_USPS_Tracking_Number_to_URL_First</name>
        <label>Add USPS Tracking Number to URL (First)</label>
        <locationX>138</locationX>
        <locationY>3588</locationY>
        <assignmentItems>
            <assignToReference>var_Tracking_url_USPS</assignToReference>
            <operator>Add</operator>
            <value>
                <stringValue
        >qtc_tLabels{!var_Count_Up}={!Loop_Through_USPS_Shipments.Tracking_Number__c}</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_Count_Up</assignToReference>
            <operator>Add</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_Through_USPS_Shipments</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Count_of_FedEx_Shipments</name>
        <label>Assign Count of FedEx Shipments</label>
        <locationX>182</locationX>
        <locationY>2040</locationY>
        <assignmentItems>
            <assignToReference>var_Count_of_Shipments</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>Filter_to_FedEx_Shipments</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Null_Check_FedEx_Shipments_Found</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Count_of_Other_Shipments</name>
        <label>Assign Count of Other Shipments</label>
        <locationX>182</locationX>
        <locationY>4056</locationY>
        <assignmentItems>
            <assignToReference>var_Count_of_Shipments</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>Filter_to_Other_Shipments</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assign_Reg_Coord_Name</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Count_of_UPS_Shipments</name>
        <label>Assign Count of UPS Shipments</label>
        <locationX>182</locationX>
        <locationY>1116</locationY>
        <assignmentItems>
            <assignToReference>var_Count_of_Shipments</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>Filter_to_UPS_Shipments</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Null_Check_UPS_Shipments_Found</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Count_of_USPS_Shipments</name>
        <label>Assign Count of USPS Shipments</label>
        <locationX>182</locationX>
        <locationY>3048</locationY>
        <assignmentItems>
            <assignToReference>var_Count_of_Shipments</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>Filter_to_USPS_Shipments</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Null_Check_USPS_Shipments_Found</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description
    >Adding 1 to count up since FedEx URL must start with tracking number, then continue with a comma + tracking number if more than one.</description>
        <name>Assign_FedEx_Tracking_URL_Beginning</name>
        <label>Assign FedEx Tracking URL Beginning</label>
        <locationX>50</locationX>
        <locationY>2256</locationY>
        <assignmentItems>
            <assignToReference>var_Tracking_url_FedEx</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue
        >https://www.fedex.com/apps/fedextrack/?action=track&amp;trackingnumber=</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_Count_Up</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_Through_FedEx_Shipments</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Onsite_Staff_Email_Recipients2</name>
        <label>Assign Onsite Staff Email Recipients</label>
        <locationX>270</locationX>
        <locationY>816</locationY>
        <assignmentItems>
            <assignToReference
      >var_Email_Recipient_Collection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference
        >Loop_through_Onsite_Staff.Email__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_through_Onsite_Staff</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Reg_Coord_Name</name>
        <label>Assign Reg Coord Name</label>
        <locationX>182</locationX>
        <locationY>4164</locationY>
        <assignmentItems>
            <assignToReference>var_Reg_Coordinator_Name</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue
        >{!$Record.Registration_Coordinator__r.FirstName} {!$Record.Registration_Coordinator__r.LastName}</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_Through_All_Shipments</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_UPS_Tracking_URL_Beginning</name>
        <label>Assign UPS Tracking URL Beginning</label>
        <locationX>50</locationX>
        <locationY>1332</locationY>
        <assignmentItems>
            <assignToReference>var_Tracking_url_UPS</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue
        >http://wwwapps.ups.com/WebTracking/processInputRequest?sort_by=status&amp;tracknums_displayed=1&amp;TypeOfInquiryNumber=T&amp;loc=en_US</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_Count_Up</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_Through_UPS_Shipments</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_USPS_Tracking_URL_Beginning</name>
        <label>Assign USPS Tracking URL Beginning</label>
        <locationX>50</locationX>
        <locationY>3264</locationY>
        <assignmentItems>
            <assignToReference>var_Count_Up</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_Tracking_url_UPS</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue
        >https://tools.usps.com/go/TrackConfirmAction?</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_Through_USPS_Shipments</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Copy_1_of_Add_1st_FedEx_Tracking_Number_to_URL</name>
        <label>Add 1st FedEx Tracking Number to URL</label>
        <locationX>402</locationX>
        <locationY>2580</locationY>
        <assignmentItems>
            <assignToReference>var_Tracking_url_FedEx</assignToReference>
            <operator>Add</operator>
            <value>
                <stringValue
        >,{!Loop_Through_FedEx_Shipments.Tracking_Number__c}</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_Count_Up</assignToReference>
            <operator>Add</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_Through_FedEx_Shipments</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Display_Shipment_Collection</name>
        <label>Display Shipment Collection</label>
        <locationX>270</locationX>
        <locationY>4380</locationY>
        <assignmentItems>
            <assignToReference>var_Shipments_Display</assignToReference>
            <operator>Add</operator>
            <value>
                <stringValue
        >&lt;b&gt;{!Loop_Through_All_Shipments.Shipment_Contents__c}&lt;/b&gt; -  {!Loop_Through_All_Shipments.Courier__c} - {!Loop_Through_All_Shipments.Tracking_Number__c} - {!Loop_Through_All_Shipments.Tracking_URL__c} - [{!Loop_Through_All_Shipments.Shipment_Direction__c}]&lt;br&gt;</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_Through_All_Shipments</targetReference>
        </connector>
    </assignments>
    <collectionProcessors>
        <name>Filter_to_FedEx_Shipments</name>
        <elementSubtype>FilterCollectionProcessor</elementSubtype>
        <label>Filter to FedEx Shipments</label>
        <locationX>182</locationX>
        <locationY>1932</locationY>
        <assignNextValueToReference
    >currentItem_Filter_to_FedEx_Shipments</assignNextValueToReference>
        <collectionProcessorType
    >FilterCollectionProcessor</collectionProcessorType>
        <collectionReference>Get_Shipments</collectionReference>
        <conditionLogic>and</conditionLogic>
        <conditions>
            <leftValueReference
      >currentItem_Filter_to_FedEx_Shipments.Courier__c</leftValueReference>
            <operator>EqualTo</operator>
            <rightValue>
                <stringValue>FedEx</stringValue>
            </rightValue>
        </conditions>
        <connector>
            <targetReference>Assign_Count_of_FedEx_Shipments</targetReference>
        </connector>
    </collectionProcessors>
    <collectionProcessors>
        <name>Filter_to_Other_Shipments</name>
        <elementSubtype>FilterCollectionProcessor</elementSubtype>
        <label>Filter to Other Shipments</label>
        <locationX>182</locationX>
        <locationY>3948</locationY>
        <assignNextValueToReference
    >currentItem_Filter_to_Other_Shipments</assignNextValueToReference>
        <collectionProcessorType
    >FilterCollectionProcessor</collectionProcessorType>
        <collectionReference>Get_Shipments</collectionReference>
        <conditionLogic>and</conditionLogic>
        <conditions>
            <leftValueReference
      >currentItem_Filter_to_Other_Shipments.Courier__c</leftValueReference>
            <operator>EqualTo</operator>
            <rightValue>
                <stringValue>Other</stringValue>
            </rightValue>
        </conditions>
        <connector>
            <targetReference>Assign_Count_of_Other_Shipments</targetReference>
        </connector>
    </collectionProcessors>
    <collectionProcessors>
        <name>Filter_to_UPS_Shipments</name>
        <elementSubtype>FilterCollectionProcessor</elementSubtype>
        <label>Filter to UPS Shipments</label>
        <locationX>182</locationX>
        <locationY>1008</locationY>
        <assignNextValueToReference
    >currentItem_Filter_to_UPS_Shipments</assignNextValueToReference>
        <collectionProcessorType
    >FilterCollectionProcessor</collectionProcessorType>
        <collectionReference>Get_Shipments</collectionReference>
        <conditionLogic>and</conditionLogic>
        <conditions>
            <leftValueReference
      >currentItem_Filter_to_UPS_Shipments.Courier__c</leftValueReference>
            <operator>EqualTo</operator>
            <rightValue>
                <stringValue>UPS</stringValue>
            </rightValue>
        </conditions>
        <connector>
            <targetReference>Assign_Count_of_UPS_Shipments</targetReference>
        </connector>
    </collectionProcessors>
    <collectionProcessors>
        <name>Filter_to_USPS_Shipments</name>
        <elementSubtype>FilterCollectionProcessor</elementSubtype>
        <label>Filter to USPS Shipments</label>
        <locationX>182</locationX>
        <locationY>2940</locationY>
        <assignNextValueToReference
    >currentItem_Filter_to_USPS_Shipments</assignNextValueToReference>
        <collectionProcessorType
    >FilterCollectionProcessor</collectionProcessorType>
        <collectionReference>Get_Shipments</collectionReference>
        <conditionLogic>and</conditionLogic>
        <conditions>
            <leftValueReference
      >currentItem_Filter_to_USPS_Shipments.Courier__c</leftValueReference>
            <operator>EqualTo</operator>
            <rightValue>
                <stringValue>USPS</stringValue>
            </rightValue>
        </conditions>
        <connector>
            <targetReference>Assign_Count_of_USPS_Shipments</targetReference>
        </connector>
    </collectionProcessors>
    <decisions>
        <name>First_FedEx_Shipment</name>
        <label>First FedEx Shipment?</label>
        <locationX>270</locationX>
        <locationY>2472</locationY>
        <defaultConnector>
            <targetReference
      >Copy_1_of_Add_1st_FedEx_Tracking_Number_to_URL</targetReference>
        </defaultConnector>
        <defaultConnectorLabel
    >No - at least the second FedEx Shipment</defaultConnectorLabel>
        <rules>
            <name>Yes_First_FedEx_Shipment</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>var_Count_Up</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>1.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference
        >Add_1st_FedEx_Tracking_Number_to_URL_First</targetReference>
            </connector>
            <label>Yes - First FedEx Shipment</label>
        </rules>
    </decisions>
    <decisions>
        <name>First_USPS_Shipment</name>
        <label>First USPS Shipment?</label>
        <locationX>270</locationX>
        <locationY>3480</locationY>
        <defaultConnector>
            <targetReference>Add_USPS_Tracking_Number_to_URL</targetReference>
        </defaultConnector>
        <defaultConnectorLabel
    >No - at least the second USPS Shipment</defaultConnectorLabel>
        <rules>
            <name>Yes_First_USPS_Shipment</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>var_Count_Up</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>1.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference
        >Add_USPS_Tracking_Number_to_URL_First</targetReference>
            </connector>
            <label>Yes - First USPS Shipment</label>
        </rules>
    </decisions>
    <decisions>
        <name>Null_Check_Any_shipments_found</name>
        <label>Null Check - Any shipments found?</label>
        <locationX>545</locationX>
        <locationY>384</locationY>
        <defaultConnectorLabel>No shipments found</defaultConnectorLabel>
        <rules>
            <name>Yes_shipments_found_General</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Shipments</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference
        >Get_Onsite_Staff_Contact_Roles</targetReference>
            </connector>
            <label>Yes, shipments found</label>
        </rules>
    </decisions>
    <decisions>
        <name>Null_Check_FedEx_Shipments_Found</name>
        <label>Null Check - FedEx Shipments Found?</label>
        <locationX>182</locationX>
        <locationY>2148</locationY>
        <defaultConnector>
            <targetReference>Filter_to_USPS_Shipments</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No FedEx Shipments</defaultConnectorLabel>
        <rules>
            <name>FedEx_Shipments_Found</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>var_Count_of_Shipments</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference
        >Assign_FedEx_Tracking_URL_Beginning</targetReference>
            </connector>
            <label>FedEx Shipments Found</label>
        </rules>
    </decisions>
    <decisions>
        <name>Null_Check_UPS_Shipments_Found</name>
        <label>Null Check - UPS Shipments Found?</label>
        <locationX>182</locationX>
        <locationY>1224</locationY>
        <defaultConnector>
            <targetReference>Filter_to_FedEx_Shipments</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No UPS Shipments</defaultConnectorLabel>
        <rules>
            <name>UPS_Shipments_Found</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>var_Count_of_Shipments</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference
        >Assign_UPS_Tracking_URL_Beginning</targetReference>
            </connector>
            <label>UPS Shipments Found</label>
        </rules>
    </decisions>
    <decisions>
        <name>Null_Check_USPS_Shipments_Found</name>
        <label>Null Check - USPS Shipments Found?</label>
        <locationX>182</locationX>
        <locationY>3156</locationY>
        <defaultConnector>
            <targetReference>Filter_to_Other_Shipments</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>USPS_Shipments_Found</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>var_Count_of_Shipments</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference
        >Assign_USPS_Tracking_URL_Beginning</targetReference>
            </connector>
            <label>USPS Shipments Found</label>
        </rules>
    </decisions>
    <decisions>
        <name>Onsite_Staff_Found</name>
        <label>Onsite Staff Found?</label>
        <locationX>336</locationX>
        <locationY>600</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Yes_Onsite_Staff_Found</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference
        >Get_Onsite_Staff_Contact_Roles</leftValueReference>
                <operator>IsEmpty</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Loop_through_Onsite_Staff</targetReference>
            </connector>
            <label>Yes, Onsite Staff Found</label>
        </rules>
    </decisions>
    <description
  >Generates Tracking URLs for all shipments and sends an email alert to event staff 2 days before the event.</description>
    <environments>Default</environments>
    <formulas>
        <name>f_FedEx_Tracking</name>
        <dataType>String</dataType>
        <expression
    >IF({!var_Tracking_url_FedEx}=&quot;&quot;, &quot;No FedEx Shipments&quot;, {!var_Tracking_url_FedEx})</expression>
    </formulas>
    <formulas>
        <name>f_Link_to_Event</name>
        <dataType>String</dataType>
        <expression
    >&quot;https://erepublic.lightning.force.com/lightning/r/Events__c/&quot; &amp; {!$Record.Id} &amp; &quot;/view&quot;</expression>
    </formulas>
    <formulas>
        <name>f_UPS_Tracking</name>
        <dataType>String</dataType>
        <expression
    >IF({!var_Tracking_url_UPS}=&quot;&quot;, &quot;No UPS Shipments&quot;, {!var_Tracking_url_UPS})</expression>
    </formulas>
    <formulas>
        <name>f_USPS_Shipments</name>
        <dataType>String</dataType>
        <expression
    >IF({!var_Tracking_url_USPS}=&quot;&quot;, &quot;No FedEx Shipments&quot;, {!var_Tracking_url_USPS})</expression>
    </formulas>
    <interviewLabel
  >Event or Conference - RT AS - Generate Shipment Tracking URLs - Email Alert {!$Flow.CurrentDateTime}</interviewLabel>
    <label
  >Event or Conference - RT AS - Shipment Tracking URLs - Email Alert</label>
    <loops>
        <name>Loop_Through_All_Shipments</name>
        <label>Loop Through All Shipments</label>
        <locationX>182</locationX>
        <locationY>4272</locationY>
        <collectionReference>Get_Shipments</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Display_Shipment_Collection</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference
      >Send_Email_with_Standard_Tracking_URLs</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Loop_Through_FedEx_Shipments</name>
        <label>Loop Through FedEx Shipments</label>
        <locationX>50</locationX>
        <locationY>2364</locationY>
        <collectionReference>Filter_to_FedEx_Shipments</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>First_FedEx_Shipment</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Filter_to_USPS_Shipments</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Loop_through_Onsite_Staff</name>
        <label>Loop through Onsite Staff</label>
        <locationX>182</locationX>
        <locationY>708</locationY>
        <collectionReference
    >Get_Onsite_Staff_Contact_Roles</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference
      >Assign_Onsite_Staff_Email_Recipients2</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Filter_to_UPS_Shipments</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Loop_Through_UPS_Shipments</name>
        <label>Loop Through UPS Shipments</label>
        <locationX>50</locationX>
        <locationY>1440</locationY>
        <collectionReference>Filter_to_UPS_Shipments</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Add_Tracking_Number_to_URL</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Filter_to_FedEx_Shipments</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Loop_Through_USPS_Shipments</name>
        <label>Loop Through USPS Shipments</label>
        <locationX>50</locationX>
        <locationY>3372</locationY>
        <collectionReference>Filter_to_USPS_Shipments</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>First_USPS_Shipment</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Filter_to_Other_Shipments</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordLookups>
        <name>Get_Onsite_Staff_Contact_Roles</name>
        <label>Get Onsite Staff Contact Roles</label>
        <locationX>336</locationX>
        <locationY>492</locationY>
        <assignNullValuesIfNoRecordsFound
    >false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Onsite_Staff_Found</targetReference>
        </connector>
        <filterLogic>1 AND (2 OR 3 OR 4 OR 5) AND 6</filterLogic>
        <filters>
            <field>Internal_Contact__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Role__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Onsite Logistics Coordinator</stringValue>
            </value>
        </filters>
        <filters>
            <field>Role__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Onsite Registration Coordinator</stringValue>
            </value>
        </filters>
        <filters>
            <field>Role__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Onsite Client Relations Specialist</stringValue>
            </value>
        </filters>
        <filters>
            <field>Role__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Onsite Event Director</stringValue>
            </value>
        </filters>
        <filters>
            <field>Event__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>Event_Contact_Role__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Shipments</name>
        <label>Get Shipments</label>
        <locationX>545</locationX>
        <locationY>276</locationY>
        <assignNullValuesIfNoRecordsFound
    >false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Null_Check_Any_shipments_found</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Event__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Tracking_Number__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Courier__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Shipment_Direction__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>To Ad Board</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>Shipment__c</object>
        <sortField>Shipment_Contents__c</sortField>
        <sortOrder>Asc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <start>
        <locationX>100</locationX>
        <locationY>0</locationY>
        <filterLogic>and</filterLogic>
        <filters>
            <field>RecordTypeId</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>01230000000ueuwAAA</stringValue>
            </value>
        </filters>
        <filters>
            <field>Status__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>Cancelled</stringValue>
            </value>
        </filters>
        <filters>
            <field>Event_Start_Date__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Assigned_Onsite_Staff__c</field>
            <operator>GreaterThan</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </filters>
        <object>Events__c</object>
        <recordTriggerType>CreateAndUpdate</recordTriggerType>
        <scheduledPaths>
            <name>Two_Business_Days_Prior_to_Event</name>
            <connector>
                <targetReference>Get_Shipments</targetReference>
            </connector>
            <label>Two Business Days Prior to Event</label>
            <offsetNumber>0</offsetNumber>
            <offsetUnit>Days</offsetUnit>
            <recordField>X2_Business_Days_Before_Event__c</recordField>
            <timeSource>RecordField</timeSource>
        </scheduledPaths>
        <scheduledPaths>
            <name>X3_Business_Days_Prior</name>
            <connector>
                <targetReference
        >Reminder_to_Check_Tracking_Numbers</targetReference>
            </connector>
            <label>3 Business Days Prior</label>
            <offsetNumber>0</offsetNumber>
            <offsetUnit>Days</offsetUnit>
            <recordField>X3_Business_Days_Before_Event__c</recordField>
            <timeSource>RecordField</timeSource>
        </scheduledPaths>
        <triggerType>RecordAfterSave</triggerType>
    </start>
    <status>Active</status>
    <textTemplates>
        <name>text_Template_Email_Body_Standard</name>
        <isViewedAsPlainText>false</isViewedAsPlainText>
        <text
    >&lt;div&gt;&lt;strong&gt;Event:&lt;/strong&gt; &lt;a href=&quot;{!f_Link_to_Event}&quot; rel=&quot;noopener noreferrer&quot; target=&quot;_blank&quot;&gt;{!$Record.Name}&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;strong&gt;Event Start Date: &lt;/strong&gt; {!$Record.Event_Start_Date__c}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;strong&gt;Track All UPS Shipments: &lt;/strong&gt;{!f_UPS_Tracking}&lt;/div&gt;&lt;div&gt;&lt;strong&gt;Track All FedEx Shipments: &lt;/strong&gt;{!f_FedEx_Tracking}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;strong&gt;Shipments:&lt;/strong&gt;&lt;/div&gt;&lt;div&gt;{!var_Shipments_Display}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;{!var_Reg_Coordinator_Name}&lt;/div&gt;&lt;div&gt;Registration Coordinator&lt;/div&gt;&lt;div&gt;{!$Record.Reg_Coordinator_Email__c}&lt;/div&gt;</text>
    </textTemplates>
    <textTemplates>
        <name>text_Template_Reminder_Check_Tracking_Numbers</name>
        <isViewedAsPlainText>false</isViewedAsPlainText>
        <text
    >&lt;div&gt;&lt;a href=&quot;{!f_Link_to_Event}&quot; rel=&quot;noopener noreferrer&quot; target=&quot;_blank&quot;&gt;{!$Record.Name}&lt;/a&gt; is about 3 business days away - please check&lt;span style=&quot;color: rgb(68, 68, 68); background-color: rgb(255, 255, 255);&quot;&gt; the tracking numbers.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Event Start Date: {!$Record.Event_Start_Date__c}.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;List of Shipments: &lt;a href=&quot;https://erepublic.lightning.force.com/lightning/r/Events__c/{!$Record.Id}/related/Event_Shipments__r/view&quot; rel=&quot;noopener noreferrer&quot; target=&quot;_blank&quot;&gt;https://erepublic.lightning.force.com/lightning/r/Events__c/{!$Record.Id}/related/Event_Shipments__r/view&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thank you!&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;-Salesforce Team&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;a href=&quot;https://erepublic.lightning.force.com/lightning/setup/Flows/page?address=%2F3005Y000001AfOkQAK%3FretUrl%3D%2Flightning%2Fsetup%2FFlows%2Fhome&quot; rel=&quot;noopener noreferrer&quot; target=&quot;_blank&quot; style=&quot;font-size: 8px;&quot;&gt;Flow&lt;/a&gt;&lt;/div&gt;</text>
    </textTemplates>
    <variables>
        <name>currentItem_Filter_to_FedEx_Shipments</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Shipment__c</objectType>
    </variables>
    <variables>
        <name>currentItem_Filter_to_Other_Shipments</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Shipment__c</objectType>
    </variables>
    <variables>
        <name>currentItem_Filter_to_UPS_Shipments</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Shipment__c</objectType>
    </variables>
    <variables>
        <name>currentItem_Filter_to_USPS_Shipments</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Shipment__c</objectType>
    </variables>
    <variables>
        <name>var_Count_of_Shipments</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>var_Count_Up</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
        <value>
            <numberValue>0.0</numberValue>
        </value>
    </variables>
    <variables>
        <name>var_Email_Recipient_Collection</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_Reg_Coordinator_Name</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_Shipments_Display</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_Tracking_url_FedEx</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_Tracking_url_UPS</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_Tracking_url_USPS</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
